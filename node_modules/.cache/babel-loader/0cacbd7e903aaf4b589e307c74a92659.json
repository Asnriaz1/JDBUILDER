{"ast":null,"code":"import { handleLoadingSpinnerClose, handleLoadingSpinnerOpenWithOptions } from \"../common/ReduxBased/LoadingSpinner/actions\";\nimport ls from 'local-storage';\nimport instance, { BASE_URL_SQL } from \"../../api/config\";\nimport { reverseString } from \"./../common/Helpers\";\nexport const LOGIN_PAGE_TEXT_CHANGE_HANDLER = \"LOGIN_PAGE_TEXT_CHANGE_HANDLER\";\nexport const LOGIN_SUBMIT_FORM_HANDLER = \"LOGIN_SUBMIT_FORM_HANDLER\";\nexport const LOGIN_PAGE_ERROR_HANDLER = \"LOGIN_PAGE_ERROR_HANDLER\";\nexport const LOGIN_STATE_CHANGE_HANDLER = \"LOGIN_STATE_CHANGE_HANDLER\";\nexport const textFieldChangeHandler = (name, value) => dispatch => {\n  dispatch({\n    type: LOGIN_PAGE_TEXT_CHANGE_HANDLER,\n    payload: value,\n    key: name\n  });\n};\nexport const loginStateChange = () => dispatch => {\n  dispatch({\n    type: LOGIN_STATE_CHANGE_HANDLER\n  });\n};\nexport const submitFormHandler = value => dispatch => {\n  let resObj = {};\n  let keys_needed = [\"access_token\", \"userText\", \"userType\"];\n  dispatch(handleLoadingSpinnerOpenWithOptions(true, \"Loading...\", \"large\"));\n  instance.post(BASE_URL_SQL + 'Login', value).then(res => {\n    if (res.data.statusCode === 404) {\n      dispatch({\n        type: LOGIN_PAGE_ERROR_HANDLER,\n        payload: res.data.error\n      });\n    }\n\n    dispatch(handleLoadingSpinnerClose());\n    keys_needed.map(item => {\n      resObj[reverseString(item)] = res.data[item];\n      return item;\n    });\n    resObj[reverseString(\"user_id\")] = res.data.userId;\n    ls.set('userId', res.data.userId);\n    resObj[reverseString(\"nameTitle\")] = res.data.userText ? res.data.userText : res.data.user_name.toUpperCase();\n    localStorage.setItem(reverseString(\"app_store\"), JSON.stringify(resObj));\n    dispatch({\n      type: LOGIN_SUBMIT_FORM_HANDLER,\n      payload: res.data\n    });\n    dispatch({\n      type: LOGIN_STATE_CHANGE_HANDLER\n    }); // if(window.location.pathname === \"/login\") {\n    //     window.location.replace(\"/user\");\n    // }else {\n    //    window.location.replace(window.location.pathname);\n    // }\n  }).catch(error => {\n    dispatch(handleLoadingSpinnerClose());\n  });\n};","map":{"version":3,"sources":["C:/Users/Ahsan Riaz/Desktop/frontend-master (new)/frontend-master/src/components/Login/actions.js"],"names":["handleLoadingSpinnerClose","handleLoadingSpinnerOpenWithOptions","ls","instance","BASE_URL_SQL","reverseString","LOGIN_PAGE_TEXT_CHANGE_HANDLER","LOGIN_SUBMIT_FORM_HANDLER","LOGIN_PAGE_ERROR_HANDLER","LOGIN_STATE_CHANGE_HANDLER","textFieldChangeHandler","name","value","dispatch","type","payload","key","loginStateChange","submitFormHandler","resObj","keys_needed","post","then","res","data","statusCode","error","map","item","userId","set","userText","user_name","toUpperCase","localStorage","setItem","JSON","stringify","catch"],"mappings":"AAAA,SACIA,yBADJ,EAEIC,mCAFJ,QAGO,6CAHP;AAIA,OAAOC,EAAP,MAAe,eAAf;AAEA,OAAOC,QAAP,IAAmBC,YAAnB,QAAuC,kBAAvC;AACA,SAASC,aAAT,QAA8B,qBAA9B;AACA,OAAO,MAAMC,8BAA8B,GAAG,gCAAvC;AACP,OAAO,MAAMC,yBAAyB,GAAG,2BAAlC;AACP,OAAO,MAAMC,wBAAwB,GAAG,0BAAjC;AACP,OAAO,MAAMC,0BAA0B,GAAG,4BAAnC;AAGP,OAAO,MAAMC,sBAAsB,GAAG,CAACC,IAAD,EAAOC,KAAP,KAAiBC,QAAQ,IAAI;AAC/DA,EAAAA,QAAQ,CAAC;AACLC,IAAAA,IAAI,EAAER,8BADD;AAELS,IAAAA,OAAO,EAAEH,KAFJ;AAGLI,IAAAA,GAAG,EAAEL;AAHA,GAAD,CAAR;AAKH,CANM;AAOP,OAAO,MAAMM,gBAAgB,GAAE,MAAMJ,QAAQ,IAAI;AAC7CA,EAAAA,QAAQ,CAAE;AACVC,IAAAA,IAAI,EAACL;AADK,GAAF,CAAR;AAIH,CALM;AAMP,OAAO,MAAMS,iBAAiB,GAAIN,KAAD,IAAWC,QAAQ,IAAI;AACpD,MAAIM,MAAM,GAAG,EAAb;AACA,MAAIC,WAAW,GAAG,CAAC,cAAD,EAAiB,UAAjB,EAA6B,UAA7B,CAAlB;AAEAP,EAAAA,QAAQ,CAACZ,mCAAmC,CAAC,IAAD,EAAO,YAAP,EAAqB,OAArB,CAApC,CAAR;AACAE,EAAAA,QAAQ,CAACkB,IAAT,CAAcjB,YAAY,GAAG,OAA7B,EAAsCQ,KAAtC,EACKU,IADL,CACUC,GAAG,IAAI;AACT,QAAIA,GAAG,CAACC,IAAJ,CAASC,UAAT,KAAwB,GAA5B,EAAiC;AAC7BZ,MAAAA,QAAQ,CAAC;AACLC,QAAAA,IAAI,EAAEN,wBADD;AAELO,QAAAA,OAAO,EAAEQ,GAAG,CAACC,IAAJ,CAASE;AAFb,OAAD,CAAR;AAKH;;AACDb,IAAAA,QAAQ,CAACb,yBAAyB,EAA1B,CAAR;AAEAoB,IAAAA,WAAW,CAACO,GAAZ,CAAgBC,IAAI,IAAI;AACpBT,MAAAA,MAAM,CAACd,aAAa,CAACuB,IAAD,CAAd,CAAN,GAA8BL,GAAG,CAACC,IAAJ,CAASI,IAAT,CAA9B;AACA,aAAOA,IAAP;AACH,KAHD;AAIAT,IAAAA,MAAM,CAACd,aAAa,CAAC,SAAD,CAAd,CAAN,GAAmCkB,GAAG,CAACC,IAAJ,CAASK,MAA5C;AACA3B,IAAAA,EAAE,CAAC4B,GAAH,CAAO,QAAP,EAAiBP,GAAG,CAACC,IAAJ,CAASK,MAA1B;AACAV,IAAAA,MAAM,CAACd,aAAa,CAAC,WAAD,CAAd,CAAN,GAAqCkB,GAAG,CAACC,IAAJ,CAASO,QAAT,GAAoBR,GAAG,CAACC,IAAJ,CAASO,QAA7B,GAAwCR,GAAG,CAACC,IAAJ,CAASQ,SAAT,CAAmBC,WAAnB,EAA7E;AACAC,IAAAA,YAAY,CAACC,OAAb,CAAqB9B,aAAa,CAAC,WAAD,CAAlC,EAAiD+B,IAAI,CAACC,SAAL,CAAelB,MAAf,CAAjD;AACAN,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAAEP,yBADD;AAELQ,MAAAA,OAAO,EAAEQ,GAAG,CAACC;AAFR,KAAD,CAAR;AAIAX,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAACL;AADA,KAAD,CAAR,CAtBS,CA2BT;AACA;AACA;AACA;AACA;AACH,GAjCL,EAkCK6B,KAlCL,CAkCWZ,KAAK,IAAI;AACZb,IAAAA,QAAQ,CAACb,yBAAyB,EAA1B,CAAR;AACH,GApCL;AAqCH,CA1CM","sourcesContent":["import {\r\n    handleLoadingSpinnerClose,\r\n    handleLoadingSpinnerOpenWithOptions\r\n} from \"../common/ReduxBased/LoadingSpinner/actions\";\r\nimport ls from 'local-storage'\r\n\r\nimport instance, { BASE_URL_SQL } from \"../../api/config\";\r\nimport { reverseString } from \"./../common/Helpers\";\r\nexport const LOGIN_PAGE_TEXT_CHANGE_HANDLER = \"LOGIN_PAGE_TEXT_CHANGE_HANDLER\";\r\nexport const LOGIN_SUBMIT_FORM_HANDLER = \"LOGIN_SUBMIT_FORM_HANDLER\";\r\nexport const LOGIN_PAGE_ERROR_HANDLER = \"LOGIN_PAGE_ERROR_HANDLER\";\r\nexport const LOGIN_STATE_CHANGE_HANDLER = \"LOGIN_STATE_CHANGE_HANDLER\";\r\n\r\n\r\nexport const textFieldChangeHandler = (name, value) => dispatch => {\r\n    dispatch({\r\n        type: LOGIN_PAGE_TEXT_CHANGE_HANDLER,\r\n        payload: value,\r\n        key: name\r\n    });\r\n};\r\nexport const loginStateChange =() => dispatch => {\r\n    dispatch ({\r\n    type:LOGIN_STATE_CHANGE_HANDLER,\r\n   \r\n    });\r\n}\r\nexport const submitFormHandler = (value) => dispatch => {\r\n    let resObj = {};\r\n    let keys_needed = [\"access_token\", \"userText\", \"userType\"];\r\n\r\n    dispatch(handleLoadingSpinnerOpenWithOptions(true, \"Loading...\", \"large\"));\r\n    instance.post(BASE_URL_SQL + 'Login', value)\r\n        .then(res => {\r\n            if (res.data.statusCode === 404) {\r\n                dispatch({\r\n                    type: LOGIN_PAGE_ERROR_HANDLER,\r\n                    payload: res.data.error,\r\n                });\r\n              \r\n            }\r\n            dispatch(handleLoadingSpinnerClose());\r\n             \r\n            keys_needed.map(item => {\r\n                resObj[reverseString(item)] = res.data[item];\r\n                return item;\r\n            });\r\n            resObj[reverseString(\"user_id\")] = res.data.userId;\r\n            ls.set('userId', res.data.userId);\r\n            resObj[reverseString(\"nameTitle\")] = res.data.userText ? res.data.userText : res.data.user_name.toUpperCase();\r\n            localStorage.setItem(reverseString(\"app_store\"), JSON.stringify(resObj));\r\n            dispatch({\r\n                type: LOGIN_SUBMIT_FORM_HANDLER,\r\n                payload: res.data\r\n            });\r\n            dispatch({\r\n                type:LOGIN_STATE_CHANGE_HANDLER,\r\n            }\r\n            );\r\n\r\n            // if(window.location.pathname === \"/login\") {\r\n            //     window.location.replace(\"/user\");\r\n            // }else {\r\n            //    window.location.replace(window.location.pathname);\r\n            // }\r\n        })\r\n        .catch(error => {\r\n            dispatch(handleLoadingSpinnerClose());\r\n        })\r\n}\r\n"]},"metadata":{},"sourceType":"module"}