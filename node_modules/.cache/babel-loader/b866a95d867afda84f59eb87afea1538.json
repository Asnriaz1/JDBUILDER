{"ast":null,"code":"import { handleLoadingSpinnerClose, handleLoadingSpinnerOpenWithOptions } from \"../../../common/ReduxBased/LoadingSpinner/actions\";\nimport { LOGIN_PAGE_ERROR_HANDLER, LOGIN_SUBMIT_FORM_HANDLER } from \"../../../Login/actions\";\nimport ls from 'local-storage';\nimport { reverseString } from \"../../../common/Helpers\";\nimport instance, { BASE_URL, BASE_URL_SQL } from \"../../../../api/config\";\nexport const JD_JOB_SUMMARY_TEXT_CHANGE_HANDLER = \"JD_JOB_SUMMARY_TEXT_CHANGE_HANDLER\";\nexport const JD_JOB_SUMMARY_EDITOR_ACTIVE_TEXT_HANDLER = \"JD_JOB_SUMMARY_EDITOR_ACTIVE_TEXT_HANDLER\";\nexport const JD_JOB_SUMMARY_EDITOR_TEXT_HANDLER = \"JD_JOB_SUMMARY_EDITOR_TEXT_HANDLER\";\nexport const JD_JOB_SUMMARY_EDITOR_TEXT_AS_HTML_HANDLER = \"JD_JOB_SUMMARY_EDITOR_TEXT_AS_HTML_HANDLER\";\nexport const JD_TEMPLATE_SAVE_HANDLER = \"JD_TEMPLATE_SAVE_HANDLER\";\nexport const JD_TEMPLATE_SAVE_SUMMARY_SUGGESTION_HANDLER = \"JD_TEMPLATE_SAVE_SUMMARY_SUGGESTION_HANDLER\";\nexport const JD_TEMPLATE_SAVE_SUMMARY_SHOW_LOGIN_POPUP_HANDLER = \"JD_TEMPLATE_SAVE_SUMMARY_SHOW_LOGIN_POPUP_HANDLER\";\nexport const textFieldChangeHandler = (name, value) => dispatch => {\n  dispatch({\n    type: JD_JOB_SUMMARY_TEXT_CHANGE_HANDLER,\n    payload: value,\n    key: name\n  });\n};\nexport const summaryDataActiveHandler = value => dispatch => {\n  dispatch({\n    type: JD_JOB_SUMMARY_EDITOR_ACTIVE_TEXT_HANDLER,\n    payload: value\n  });\n};\nexport const saveUpdatedSummaryEditor = value => dispatch => {\n  dispatch({\n    type: JD_JOB_SUMMARY_EDITOR_TEXT_HANDLER,\n    payload: value\n  });\n};\nexport const saveUpdatedSummaryAsHTML = value => dispatch => {\n  dispatch({\n    type: JD_JOB_SUMMARY_EDITOR_TEXT_AS_HTML_HANDLER,\n    payload: value\n  });\n};\nexport const loginandSubmitTemplateHandler = (value, templateId, selectedSkills, selectedLanguages, JOindustryField, JOfunctionField, rolesResHTMLData, rawContentSummaryAsHTML) => dispatch => {\n  let resObj = {};\n  let keys_needed = [\"access_token\", \"userText\", \"userType\"];\n  dispatch(handleLoadingSpinnerOpenWithOptions(true, \"Signing In\", \"large\"));\n  instance.post(BASE_URL_SQL + 'Login', value).then(res => {\n    if (res.data.statusCode === 404) {\n      dispatch({\n        type: LOGIN_PAGE_ERROR_HANDLER,\n        payload: res.data.error\n      });\n    }\n\n    dispatch(handleLoadingSpinnerClose());\n    keys_needed.map(item => {\n      resObj[reverseString(item)] = res.data[item];\n      return item;\n    });\n    resObj[reverseString(\"user_id\")] = res.data.userId;\n    resObj[reverseString(\"nameTitle\")] = res.data.userText ? res.data.userText : res.data.user_name.toUpperCase();\n    localStorage.setItem(reverseString(\"app_store\"), JSON.stringify(resObj));\n    dispatch({\n      type: LOGIN_SUBMIT_FORM_HANDLER,\n      payload: res.data\n    });\n    dispatch({\n      type: JD_TEMPLATE_SAVE_SUMMARY_SHOW_LOGIN_POPUP_HANDLER,\n      payload: false\n    });\n    let jobCode = res.data.jobCode;\n    ls.set('jobCode', jobCode);\n    let userId = res.data.userId;\n    ls.set('userId', userId);\n    let savedTempId = ls.get('suggestedTempId');\n    savedTempId = templateId ? templateId : savedTempId;\n    let selected_skills = selectedSkills ? selectedSkills.map(item => {\n      return {\n        _id: item.id,\n        level: item.level,\n        importance: item.importance,\n        title: item.title\n      };\n    }) : [];\n    let selected_languages = selectedLanguages ? selectedLanguages.map(item => {\n      return {\n        _id: item.id,\n        level: item.level,\n        importance: item.importance,\n        title: item.title\n      };\n    }) : [];\n    let JDIndustry = JOindustryField ? JOindustryField[0].id : \"\";\n    let JDFunction = JOfunctionField ? JOfunctionField[0].id : \"\"; //sending call to save object\n\n    let dataObj = {\n      user_id: res.data.userId ? res.data.userId : userId,\n      job_code: jobCode,\n      template_id: savedTempId,\n      title: \"User Onetime Templates\",\n      //missing\n      _selected_rr: {\n        htmlstring: rolesResHTMLData,\n        rol: [\"5fbcf9c331d5edc5c9ae2a39\"],\n        res: [\"5fbcf9c331d5edc5c9ae2a39\"]\n      },\n      _selected_skills: [...selected_skills],\n      _selected_languages: [...selected_languages],\n      exp: \"2-5\",\n      _selected_summary: {\n        htmlstring: rawContentSummaryAsHTML,\n        s_id: [\"5fbcf9c331d5edc5c9ae2a39\", \"5fbcf9c331d5edc5c9ae2a39\"]\n      },\n      _selected_industry: JDIndustry,\n      _selected_function: JDFunction,\n      employment_type: \"Full Time\",\n      positions: 5,\n      salary_detail: {\n        amount: 50,\n        type: \"hourly\",\n        currency: \"$\",\n        visible: true\n      },\n      remote_work: true\n    };\n    dispatch(handleLoadingSpinnerOpenWithOptions(true, \"Saving JD\", \"large\"));\n    instance.post(BASE_URL + 'Templates', dataObj).then(res => {\n      dispatch(handleLoadingSpinnerClose());\n      window.location.replace('/create/advertise');\n    }).catch(error => {\n      dispatch(handleLoadingSpinnerClose());\n    });\n  }).catch(error => {\n    dispatch(handleLoadingSpinnerClose());\n  });\n};\nexport const submitTemplateHandler = (templateId, selectedSkills, selectedLanguages, JOindustryField, JOfunctionField, rolesResHTMLData, rawContentSummaryAsHTML) => dispatch => {\n  //sending call to save object\n  let jobCode = ls.get('jobCode');\n  let userId = ls.get('userId');\n  let savedTempId = ls.get('suggestedTempId');\n  savedTempId = templateId ? templateId : savedTempId;\n  let selected_skills = selectedSkills ? selectedSkills.map(item => {\n    return {\n      _id: item.id,\n      level: item.level,\n      importance: item.importance,\n      title: item.title\n    };\n  }) : [];\n  let selected_languages = selectedLanguages ? selectedLanguages.map(item => {\n    return {\n      _id: item.id,\n      level: item.level,\n      importance: item.importance,\n      title: item.title\n    };\n  }) : []; //JD industry\n\n  let JDIndustry = JOindustryField ? JOindustryField[0].id : \"\";\n  let JDFunction = JOfunctionField ? JOfunctionField[0].id : \"\";\n  let dataObj = {\n    user_id: userId,\n    job_code: jobCode,\n    template_id: savedTempId,\n    title: \"User Onetime Templates\",\n    //missing\n    _selected_rr: {\n      htmlstring: rolesResHTMLData,\n      rol: [\"5fbcf9c331d5edc5c9ae2a39\"],\n      res: [\"5fbcf9c331d5edc5c9ae2a39\"]\n    },\n    _selected_skills: [...selected_skills],\n    _selected_languages: [...selected_languages],\n    exp: \"2-5\",\n    _selected_summary: {\n      htmlstring: rawContentSummaryAsHTML,\n      s_id: [\"5fbcf9c331d5edc5c9ae2a39\", \"5fbcf9c331d5edc5c9ae2a39\"]\n    },\n    _selected_industry: JDIndustry,\n    _selected_function: JDFunction,\n    employment_type: \"Full Time\",\n    positions: 5,\n    salary_detail: {\n      amount: 50,\n      type: \"hourly\",\n      currency: \"$\",\n      visible: true\n    },\n    remote_work: true\n  };\n  dispatch(handleLoadingSpinnerOpenWithOptions(true, \"Saving JD\", \"large\"));\n  instance.post(BASE_URL + 'Templates', dataObj).then(res => {\n    dispatch(handleLoadingSpinnerClose());\n    window.location.replace('/create/advertise');\n  }).catch(error => {\n    dispatch(handleLoadingSpinnerClose());\n  }); // instance.post(BASE_URL+'Templates', data)\n  // .then(res => {\n  //     if(res.status === 200) {\n  //         dispatch({\n  //             type: JD_TEMPLATE_SAVE_HANDLER,\n  //             payload: true,\n  //         });\n  //     }\n  // })\n  // .catch(error => {\n  // })\n};\nexport const fetchDataSummary = value => dispatch => {\n  let data = value.summary ? value.summary.map(item => {\n    return {\n      id: item.summary_id,\n      desc: item.title,\n      used: item.used,\n      isActive: false\n    };\n  }) : [];\n  dispatch({\n    type: JD_TEMPLATE_SAVE_SUMMARY_SUGGESTION_HANDLER,\n    payload: data\n  });\n};\nexport const showLoginPopupHandler = value => dispatch => {\n  dispatch({\n    type: JD_TEMPLATE_SAVE_SUMMARY_SHOW_LOGIN_POPUP_HANDLER,\n    payload: value\n  });\n};","map":{"version":3,"sources":["C:/Users/Ahsan Riaz/Desktop/frontend-master (new)/frontend-master/src/components/JD/JDBuilding/Summary/actions.js"],"names":["handleLoadingSpinnerClose","handleLoadingSpinnerOpenWithOptions","LOGIN_PAGE_ERROR_HANDLER","LOGIN_SUBMIT_FORM_HANDLER","ls","reverseString","instance","BASE_URL","BASE_URL_SQL","JD_JOB_SUMMARY_TEXT_CHANGE_HANDLER","JD_JOB_SUMMARY_EDITOR_ACTIVE_TEXT_HANDLER","JD_JOB_SUMMARY_EDITOR_TEXT_HANDLER","JD_JOB_SUMMARY_EDITOR_TEXT_AS_HTML_HANDLER","JD_TEMPLATE_SAVE_HANDLER","JD_TEMPLATE_SAVE_SUMMARY_SUGGESTION_HANDLER","JD_TEMPLATE_SAVE_SUMMARY_SHOW_LOGIN_POPUP_HANDLER","textFieldChangeHandler","name","value","dispatch","type","payload","key","summaryDataActiveHandler","saveUpdatedSummaryEditor","saveUpdatedSummaryAsHTML","loginandSubmitTemplateHandler","templateId","selectedSkills","selectedLanguages","JOindustryField","JOfunctionField","rolesResHTMLData","rawContentSummaryAsHTML","resObj","keys_needed","post","then","res","data","statusCode","error","map","item","userId","userText","user_name","toUpperCase","localStorage","setItem","JSON","stringify","jobCode","set","savedTempId","get","selected_skills","_id","id","level","importance","title","selected_languages","JDIndustry","JDFunction","dataObj","user_id","job_code","template_id","_selected_rr","htmlstring","rol","_selected_skills","_selected_languages","exp","_selected_summary","s_id","_selected_industry","_selected_function","employment_type","positions","salary_detail","amount","currency","visible","remote_work","window","location","replace","catch","submitTemplateHandler","fetchDataSummary","summary","summary_id","desc","used","isActive","showLoginPopupHandler"],"mappings":"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","sourcesContent":["import {\n    handleLoadingSpinnerClose,\n    handleLoadingSpinnerOpenWithOptions\n} from \"../../../common/ReduxBased/LoadingSpinner/actions\";\nimport {\n    LOGIN_PAGE_ERROR_HANDLER,\n    LOGIN_SUBMIT_FORM_HANDLER\n} from \"../../../Login/actions\";\nimport ls from 'local-storage'\n\nimport { reverseString } from \"../../../common/Helpers\";\nimport instance, { BASE_URL, BASE_URL_SQL } from \"../../../../api/config\"\nexport const JD_JOB_SUMMARY_TEXT_CHANGE_HANDLER = \"JD_JOB_SUMMARY_TEXT_CHANGE_HANDLER\";\nexport const JD_JOB_SUMMARY_EDITOR_ACTIVE_TEXT_HANDLER = \"JD_JOB_SUMMARY_EDITOR_ACTIVE_TEXT_HANDLER\";\nexport const JD_JOB_SUMMARY_EDITOR_TEXT_HANDLER = \"JD_JOB_SUMMARY_EDITOR_TEXT_HANDLER\";\nexport const JD_JOB_SUMMARY_EDITOR_TEXT_AS_HTML_HANDLER = \"JD_JOB_SUMMARY_EDITOR_TEXT_AS_HTML_HANDLER\";\nexport const JD_TEMPLATE_SAVE_HANDLER = \"JD_TEMPLATE_SAVE_HANDLER\";\nexport const JD_TEMPLATE_SAVE_SUMMARY_SUGGESTION_HANDLER = \"JD_TEMPLATE_SAVE_SUMMARY_SUGGESTION_HANDLER\";\nexport const JD_TEMPLATE_SAVE_SUMMARY_SHOW_LOGIN_POPUP_HANDLER = \"JD_TEMPLATE_SAVE_SUMMARY_SHOW_LOGIN_POPUP_HANDLER\";\n\nexport const textFieldChangeHandler = (name, value) => dispatch => {\n    dispatch({\n        type: JD_JOB_SUMMARY_TEXT_CHANGE_HANDLER,\n        payload: value,\n        key: name\n    });\n};\n\nexport const summaryDataActiveHandler = (value) => dispatch => {\n    dispatch({\n        type: JD_JOB_SUMMARY_EDITOR_ACTIVE_TEXT_HANDLER,\n        payload: value,\n    });\n};\n\nexport const saveUpdatedSummaryEditor = (value) => dispatch => {\n    dispatch({\n        type: JD_JOB_SUMMARY_EDITOR_TEXT_HANDLER,\n        payload: value,\n    });\n};\n\nexport const saveUpdatedSummaryAsHTML = (value) => dispatch => {\n    dispatch({\n        type: JD_JOB_SUMMARY_EDITOR_TEXT_AS_HTML_HANDLER,\n        payload: value,\n    });\n};\n\nexport const loginandSubmitTemplateHandler = (value, templateId, selectedSkills, selectedLanguages, JOindustryField, JOfunctionField, rolesResHTMLData, rawContentSummaryAsHTML) => dispatch => {\n    let resObj = {};\n    let keys_needed = [\"access_token\", \"userText\", \"userType\"];\n\n    dispatch(handleLoadingSpinnerOpenWithOptions(true, \"Signing In\", \"large\"));\n    instance.post(BASE_URL_SQL + 'Login', value)\n        .then(res => {\n            if (res.data.statusCode === 404) {\n                dispatch({\n                    type: LOGIN_PAGE_ERROR_HANDLER,\n                    payload: res.data.error,\n                });\n            }\n            dispatch(handleLoadingSpinnerClose());\n            keys_needed.map(item => {\n                resObj[reverseString(item)] = res.data[item];\n                return item;\n            });\n            resObj[reverseString(\"user_id\")] = res.data.userId;\n            resObj[reverseString(\"nameTitle\")] = res.data.userText ? res.data.userText : res.data.user_name.toUpperCase();\n            localStorage.setItem(reverseString(\"app_store\"), JSON.stringify(resObj));\n            dispatch({\n                type: LOGIN_SUBMIT_FORM_HANDLER,\n                payload: res.data\n            });\n\n            dispatch({\n                type: JD_TEMPLATE_SAVE_SUMMARY_SHOW_LOGIN_POPUP_HANDLER,\n                payload: false,\n            });\n\n            let jobCode = res.data.jobCode;\n            ls.set('jobCode', jobCode);\n\n            let userId = res.data.userId;\n            ls.set('userId', userId);\n\n            let savedTempId = ls.get('suggestedTempId')\n            savedTempId = templateId ? templateId : savedTempId\n\n            let selected_skills = selectedSkills ? selectedSkills.map(item => {\n                return {\n                    _id: item.id,\n                    level: item.level,\n                    importance: item.importance,\n                    title: item.title\n                }\n            }) : []\n\n            let selected_languages = selectedLanguages ? selectedLanguages.map(item => {\n                return {\n                    _id: item.id,\n                    level: item.level,\n                    importance: item.importance,\n                    title: item.title\n                }\n            }) : []\n\n            let JDIndustry = JOindustryField ? JOindustryField[0].id : \"\"\n            let JDFunction = JOfunctionField ? JOfunctionField[0].id : \"\"\n\n            //sending call to save object\n            let dataObj = {\n                user_id: res.data.userId ? res.data.userId : userId,\n                job_code: jobCode,\n                template_id: savedTempId,\n                title: \"User Onetime Templates\", //missing\n                _selected_rr: {\n                    htmlstring: rolesResHTMLData,\n                    rol:[\"5fbcf9c331d5edc5c9ae2a39\"],\n                    res: [\"5fbcf9c331d5edc5c9ae2a39\"]\n                },\n                _selected_skills: [...selected_skills],\n                _selected_languages: [...selected_languages],\n                exp: \"2-5\",\n                _selected_summary: \n                    {\n                        htmlstring: rawContentSummaryAsHTML,\n                        s_id: [\"5fbcf9c331d5edc5c9ae2a39\",\"5fbcf9c331d5edc5c9ae2a39\"]\n                    }\n                ,\n                _selected_industry: JDIndustry,\n                _selected_function: JDFunction,\n                employment_type: \"Full Time\",\n                positions: 5,\n                salary_detail: {\n                    amount: 50,\n                    type: \"hourly\",\n                    currency: \"$\",\n                    visible: true\n                },\n                remote_work:true\n            }\n\n            dispatch(handleLoadingSpinnerOpenWithOptions(true, \"Saving JD\", \"large\"));\n            instance.post(BASE_URL + 'Templates', dataObj)\n            .then(res => {\n                dispatch(handleLoadingSpinnerClose());\n                window.location.replace('/create/advertise')\n            })\n            .catch(error => {\n                dispatch(handleLoadingSpinnerClose());\n            })\n\n        })\n        .catch(error => {\n            dispatch(handleLoadingSpinnerClose());\n        })\n}\n\nexport const submitTemplateHandler = (templateId, selectedSkills, selectedLanguages, JOindustryField, JOfunctionField, rolesResHTMLData, rawContentSummaryAsHTML) => dispatch => {\n\n    //sending call to save object\n\n    let jobCode = ls.get('jobCode');\n\n    let userId = ls.get('userId');\n\n    let savedTempId = ls.get('suggestedTempId')\n    savedTempId = templateId ? templateId : savedTempId\n\n    let selected_skills = selectedSkills ? selectedSkills.map(item => {\n        return {\n            _id: item.id,\n            level: item.level,\n            importance: item.importance,\n            title: item.title\n        }\n    }) : []\n\n    let selected_languages = selectedLanguages ? selectedLanguages.map(item => {\n        return {\n            _id: item.id,\n            level: item.level,\n            importance: item.importance,\n            title: item.title\n        }\n    }) : []\n\n    //JD industry\n    let JDIndustry = JOindustryField ? JOindustryField[0].id : \"\"\n    let JDFunction = JOfunctionField ? JOfunctionField[0].id : \"\"\n\n    let dataObj = {\n        user_id: userId,\n        job_code: jobCode,\n        template_id: savedTempId,\n        title: \"User Onetime Templates\", //missing\n        _selected_rr: {\n            htmlstring: rolesResHTMLData,\n            rol:[\"5fbcf9c331d5edc5c9ae2a39\"],\n            res: [\"5fbcf9c331d5edc5c9ae2a39\"]\n        },\n        _selected_skills: [...selected_skills],\n        _selected_languages: [...selected_languages],\n        exp: \"2-5\",\n        _selected_summary: \n            {\n                htmlstring: rawContentSummaryAsHTML,\n                s_id: [\"5fbcf9c331d5edc5c9ae2a39\",\"5fbcf9c331d5edc5c9ae2a39\"]\n            }\n        ,\n        _selected_industry: JDIndustry,\n        _selected_function: JDFunction,\n        employment_type: \"Full Time\",\n        positions: 5,\n        salary_detail: {\n            amount: 50,\n            type: \"hourly\",\n            currency: \"$\",\n            visible: true\n        },\n        remote_work:true\n    }\n\n    dispatch(handleLoadingSpinnerOpenWithOptions(true, \"Saving JD\", \"large\"));\n    instance.post(BASE_URL + 'Templates', dataObj)\n    .then(res => {\n        dispatch(handleLoadingSpinnerClose());\n        window.location.replace('/create/advertise')\n    })\n    .catch(error => {\n        dispatch(handleLoadingSpinnerClose());\n    })\n\n    // instance.post(BASE_URL+'Templates', data)\n    // .then(res => {\n    //     if(res.status === 200) {\n    //         dispatch({\n    //             type: JD_TEMPLATE_SAVE_HANDLER,\n    //             payload: true,\n    //         });\n    //     }\n    // })\n    // .catch(error => {\n\n    // })\n};\n\nexport const fetchDataSummary = (value) => dispatch => {\n\n    let data = value.summary ? value.summary.map(item => {\n        return {\n            id: item.summary_id,\n            desc: item.title,\n            used: item.used,\n            isActive: false\n        }\n    }): []\n    \n    dispatch({\n        type: JD_TEMPLATE_SAVE_SUMMARY_SUGGESTION_HANDLER,\n        payload: data,\n    });\n};\nexport const showLoginPopupHandler = (value) => dispatch => {\n    dispatch({\n        type: JD_TEMPLATE_SAVE_SUMMARY_SHOW_LOGIN_POPUP_HANDLER,\n        payload: value,\n    });\n};"]},"metadata":{},"sourceType":"module"}