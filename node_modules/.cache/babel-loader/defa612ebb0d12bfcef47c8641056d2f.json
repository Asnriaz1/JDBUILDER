{"ast":null,"code":"import { handleLoadingSpinnerClose, handleLoadingSpinnerOpenWithOptions } from \"../common/ReduxBased/LoadingSpinner/actions\";\nimport ls from 'local-storage';\nimport instance, { BASE_URL_SQL } from \"../../api/config\";\nimport { reverseString } from \"./../common/Helpers\";\nexport const LOGIN_PAGE_TEXT_CHANGE_HANDLER = \"LOGIN_PAGE_TEXT_CHANGE_HANDLER\";\nexport const LOGIN_SUBMIT_FORM_HANDLER = \"LOGIN_SUBMIT_FORM_HANDLER\";\nexport const LOGIN_PAGE_ERROR_HANDLER = \"LOGIN_PAGE_ERROR_HANDLER\";\nexport const LOGIN_STATE_HANDLER = \"LOGIN_STATE_HANDLER\";\nexport const changeloginstate = value => dispatch => {\n  dispatch({\n    type: LOGIN_STATE_HANDLER,\n    payload: value\n  });\n};\nexport const textFieldChangeHandler = (name, value) => dispatch => {\n  dispatch({\n    type: LOGIN_PAGE_TEXT_CHANGE_HANDLER,\n    payload: value,\n    key: name\n  });\n};\nexport const submitFormHandler = value => dispatch => {\n  let resObj = {};\n  let keys_needed = [\"access_token\", \"userText\", \"userType\"];\n  dispatch(handleLoadingSpinnerOpenWithOptions(true, \"Loading...\", \"large\"));\n  instance.post(BASE_URL_SQL + 'Login', value).then(res => {\n    if (res.data.statusCode === 404) {\n      dispatch({\n        type: LOGIN_PAGE_ERROR_HANDLER,\n        payload: res.data.error\n      });\n    }\n\n    dispatch(handleLoadingSpinnerClose());\n    keys_needed.map(item => {\n      resObj[reverseString(item)] = res.data[item];\n      dispatch(changeloginstate(1));\n      console.log(state.UISetting.isLogin);\n      return item;\n    });\n    resObj[reverseString(\"user_id\")] = res.data.userId;\n    ls.set('userId', res.data.userId);\n    resObj[reverseString(\"nameTitle\")] = res.data.userText ? res.data.userText : res.data.user_name.toUpperCase();\n    localStorage.setItem(reverseString(\"app_store\"), JSON.stringify(resObj));\n    dispatch({\n      type: LOGIN_SUBMIT_FORM_HANDLER,\n      payload: res.data\n    });\n\n    if (window.location.pathname === \"/login\") {\n      window.location.replace(\"/user\");\n    } else {\n      window.location.replace(window.location.pathname);\n    }\n  }).catch(error => {\n    dispatch(handleLoadingSpinnerClose());\n  });\n};","map":{"version":3,"sources":["C:/Users/Ahsan Riaz/Desktop/frontend-master (new)/frontend-master/src/components/Login/actions.js"],"names":["handleLoadingSpinnerClose","handleLoadingSpinnerOpenWithOptions","ls","instance","BASE_URL_SQL","reverseString","LOGIN_PAGE_TEXT_CHANGE_HANDLER","LOGIN_SUBMIT_FORM_HANDLER","LOGIN_PAGE_ERROR_HANDLER","LOGIN_STATE_HANDLER","changeloginstate","value","dispatch","type","payload","textFieldChangeHandler","name","key","submitFormHandler","resObj","keys_needed","post","then","res","data","statusCode","error","map","item","console","log","state","UISetting","isLogin","userId","set","userText","user_name","toUpperCase","localStorage","setItem","JSON","stringify","window","location","pathname","replace","catch"],"mappings":"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","sourcesContent":["import {\n    handleLoadingSpinnerClose,\n    handleLoadingSpinnerOpenWithOptions\n} from \"../common/ReduxBased/LoadingSpinner/actions\";\nimport ls from 'local-storage'\n\nimport instance, { BASE_URL_SQL } from \"../../api/config\";\nimport { reverseString } from \"./../common/Helpers\";\nexport const LOGIN_PAGE_TEXT_CHANGE_HANDLER = \"LOGIN_PAGE_TEXT_CHANGE_HANDLER\";\nexport const LOGIN_SUBMIT_FORM_HANDLER = \"LOGIN_SUBMIT_FORM_HANDLER\";\nexport const LOGIN_PAGE_ERROR_HANDLER = \"LOGIN_PAGE_ERROR_HANDLER\";\nexport const LOGIN_STATE_HANDLER = \"LOGIN_STATE_HANDLER\";\n\n\nexport const changeloginstate =(value) => dispatch =>{\n    dispatch({\n       type: LOGIN_STATE_HANDLER,\n       payload:value,\n    });\n};\n\nexport const textFieldChangeHandler = (name, value) => dispatch => {\n    dispatch({\n        type: LOGIN_PAGE_TEXT_CHANGE_HANDLER,\n        payload: value,\n        key: name\n    });\n};\n\nexport const submitFormHandler = (value) => dispatch => {\n    let resObj = {};\n    let keys_needed = [\"access_token\", \"userText\", \"userType\"];\n\n    dispatch(handleLoadingSpinnerOpenWithOptions(true, \"Loading...\", \"large\"));\n    instance.post(BASE_URL_SQL + 'Login', value)\n        .then(res => {\n            if (res.data.statusCode === 404) {\n                dispatch({\n                    type: LOGIN_PAGE_ERROR_HANDLER,\n                    payload: res.data.error,\n                });\n              \n            }\n            dispatch(handleLoadingSpinnerClose());\n            keys_needed.map(item => {\n                resObj[reverseString(item)] = res.data[item];\n                dispatch(changeloginstate(1))\n                console.log(state.UISetting.isLogin)\n                return item;\n            });\n            resObj[reverseString(\"user_id\")] = res.data.userId;\n            ls.set('userId', res.data.userId);\n            resObj[reverseString(\"nameTitle\")] = res.data.userText ? res.data.userText : res.data.user_name.toUpperCase();\n            localStorage.setItem(reverseString(\"app_store\"), JSON.stringify(resObj));\n            dispatch({\n                type: LOGIN_SUBMIT_FORM_HANDLER,\n                payload: res.data\n            });\n            if(window.location.pathname === \"/login\") {\n                window.location.replace(\"/user\");\n            }else {\n                window.location.replace(window.location.pathname);\n            }\n        })\n        .catch(error => {\n            dispatch(handleLoadingSpinnerClose());\n        })\n}"]},"metadata":{},"sourceType":"module"}