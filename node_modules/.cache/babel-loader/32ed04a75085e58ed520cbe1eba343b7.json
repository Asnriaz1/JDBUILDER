{"ast":null,"code":"import{handleLoadingSpinnerClose,handleLoadingSpinnerOpenWithOptions}from\"../common/ReduxBased/LoadingSpinner/actions\";import ls from'local-storage';import instance,{BASE_URL_SQL}from\"../../api/config\";import{reverseString}from\"./../common/Helpers\";export var LOGIN_PAGE_TEXT_CHANGE_HANDLER=\"LOGIN_PAGE_TEXT_CHANGE_HANDLER\";export var LOGIN_SUBMIT_FORM_HANDLER=\"LOGIN_SUBMIT_FORM_HANDLER\";export var LOGIN_PAGE_ERROR_HANDLER=\"LOGIN_PAGE_ERROR_HANDLER\";export var textFieldChangeHandler=function textFieldChangeHandler(name,value){return function(dispatch){dispatch({type:LOGIN_PAGE_TEXT_CHANGE_HANDLER,payload:value,key:name});};};export var submitFormHandler=function submitFormHandler(value){return function(dispatch){var resObj={};var keys_needed=[\"access_token\",\"userText\",\"userType\"];dispatch(handleLoadingSpinnerOpenWithOptions(true,\"Loading...\",\"large\"));instance.post(BASE_URL_SQL+'Login',value).then(function(res){if(res.data.statusCode===404){dispatch({type:LOGIN_PAGE_ERROR_HANDLER,payload:res.data.error});}dispatch(handleLoadingSpinnerClose());keys_needed.map(function(item){resObj[reverseString(item)]=res.data[item];return item;});resObj[reverseString(\"user_id\")]=res.data.userId;ls.set('userId',res.data.userId);resObj[reverseString(\"nameTitle\")]=res.data.userText?res.data.userText:res.data.user_name.toUpperCase();localStorage.setItem(reverseString(\"app_store\"),JSON.stringify(resObj));dispatch({type:LOGIN_SUBMIT_FORM_HANDLER,payload:res.data});if(window.location.pathname===\"/login\"){window.location.replace(\"/user\");}else{window.location.replace(window.location.pathname);}}).catch(function(error){dispatch(handleLoadingSpinnerClose());});};};","map":{"version":3,"sources":["C:/Users/Ahsan Riaz/Desktop/frontend-master (new)/frontend-master/src/components/Login/actions.js"],"names":["handleLoadingSpinnerClose","handleLoadingSpinnerOpenWithOptions","ls","instance","BASE_URL_SQL","reverseString","LOGIN_PAGE_TEXT_CHANGE_HANDLER","LOGIN_SUBMIT_FORM_HANDLER","LOGIN_PAGE_ERROR_HANDLER","textFieldChangeHandler","name","value","dispatch","type","payload","key","submitFormHandler","resObj","keys_needed","post","then","res","data","statusCode","error","map","item","userId","set","userText","user_name","toUpperCase","localStorage","setItem","JSON","stringify","window","location","pathname","replace","catch"],"mappings":"AAAA,OACIA,yBADJ,CAEIC,mCAFJ,KAGO,6CAHP,CAIA,MAAOC,CAAAA,EAAP,KAAe,eAAf,CAEA,MAAOC,CAAAA,QAAP,EAAmBC,YAAnB,KAAuC,kBAAvC,CACA,OAASC,aAAT,KAA8B,qBAA9B,CACA,MAAO,IAAMC,CAAAA,8BAA8B,CAAG,gCAAvC,CACP,MAAO,IAAMC,CAAAA,yBAAyB,CAAG,2BAAlC,CACP,MAAO,IAAMC,CAAAA,wBAAwB,CAAG,0BAAjC,CAEP,MAAO,IAAMC,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,CAACC,IAAD,CAAOC,KAAP,QAAiB,UAAAC,QAAQ,CAAI,CAC/DA,QAAQ,CAAC,CACLC,IAAI,CAAEP,8BADD,CAELQ,OAAO,CAAEH,KAFJ,CAGLI,GAAG,CAAEL,IAHA,CAAD,CAAR,CAKH,CANqC,EAA/B,CAQP,MAAO,IAAMM,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACL,KAAD,QAAW,UAAAC,QAAQ,CAAI,CACpD,GAAIK,CAAAA,MAAM,CAAG,EAAb,CACA,GAAIC,CAAAA,WAAW,CAAG,CAAC,cAAD,CAAiB,UAAjB,CAA6B,UAA7B,CAAlB,CAEAN,QAAQ,CAACX,mCAAmC,CAAC,IAAD,CAAO,YAAP,CAAqB,OAArB,CAApC,CAAR,CACAE,QAAQ,CAACgB,IAAT,CAAcf,YAAY,CAAG,OAA7B,CAAsCO,KAAtC,EACKS,IADL,CACU,SAAAC,GAAG,CAAI,CACT,GAAIA,GAAG,CAACC,IAAJ,CAASC,UAAT,GAAwB,GAA5B,CAAiC,CAC7BX,QAAQ,CAAC,CACLC,IAAI,CAAEL,wBADD,CAELM,OAAO,CAAEO,GAAG,CAACC,IAAJ,CAASE,KAFb,CAAD,CAAR,CAIH,CACDZ,QAAQ,CAACZ,yBAAyB,EAA1B,CAAR,CACAkB,WAAW,CAACO,GAAZ,CAAgB,SAAAC,IAAI,CAAI,CACpBT,MAAM,CAACZ,aAAa,CAACqB,IAAD,CAAd,CAAN,CAA8BL,GAAG,CAACC,IAAJ,CAASI,IAAT,CAA9B,CACA,MAAOA,CAAAA,IAAP,CACH,CAHD,EAIAT,MAAM,CAACZ,aAAa,CAAC,SAAD,CAAd,CAAN,CAAmCgB,GAAG,CAACC,IAAJ,CAASK,MAA5C,CACAzB,EAAE,CAAC0B,GAAH,CAAO,QAAP,CAAiBP,GAAG,CAACC,IAAJ,CAASK,MAA1B,EACAV,MAAM,CAACZ,aAAa,CAAC,WAAD,CAAd,CAAN,CAAqCgB,GAAG,CAACC,IAAJ,CAASO,QAAT,CAAoBR,GAAG,CAACC,IAAJ,CAASO,QAA7B,CAAwCR,GAAG,CAACC,IAAJ,CAASQ,SAAT,CAAmBC,WAAnB,EAA7E,CACAC,YAAY,CAACC,OAAb,CAAqB5B,aAAa,CAAC,WAAD,CAAlC,CAAiD6B,IAAI,CAACC,SAAL,CAAelB,MAAf,CAAjD,EACAL,QAAQ,CAAC,CACLC,IAAI,CAAEN,yBADD,CAELO,OAAO,CAAEO,GAAG,CAACC,IAFR,CAAD,CAAR,CAIA,GAAGc,MAAM,CAACC,QAAP,CAAgBC,QAAhB,GAA6B,QAAhC,CAA0C,CACtCF,MAAM,CAACC,QAAP,CAAgBE,OAAhB,CAAwB,OAAxB,EACH,CAFD,IAEM,CACFH,MAAM,CAACC,QAAP,CAAgBE,OAAhB,CAAwBH,MAAM,CAACC,QAAP,CAAgBC,QAAxC,EACH,CACJ,CA1BL,EA2BKE,KA3BL,CA2BW,SAAAhB,KAAK,CAAI,CACZZ,QAAQ,CAACZ,yBAAyB,EAA1B,CAAR,CACH,CA7BL,EA8BH,CAnCgC,EAA1B","sourcesContent":["import {\n    handleLoadingSpinnerClose,\n    handleLoadingSpinnerOpenWithOptions\n} from \"../common/ReduxBased/LoadingSpinner/actions\";\nimport ls from 'local-storage'\n\nimport instance, { BASE_URL_SQL } from \"../../api/config\";\nimport { reverseString } from \"./../common/Helpers\";\nexport const LOGIN_PAGE_TEXT_CHANGE_HANDLER = \"LOGIN_PAGE_TEXT_CHANGE_HANDLER\";\nexport const LOGIN_SUBMIT_FORM_HANDLER = \"LOGIN_SUBMIT_FORM_HANDLER\";\nexport const LOGIN_PAGE_ERROR_HANDLER = \"LOGIN_PAGE_ERROR_HANDLER\";\n\nexport const textFieldChangeHandler = (name, value) => dispatch => {\n    dispatch({\n        type: LOGIN_PAGE_TEXT_CHANGE_HANDLER,\n        payload: value,\n        key: name\n    });\n};\n\nexport const submitFormHandler = (value) => dispatch => {\n    let resObj = {};\n    let keys_needed = [\"access_token\", \"userText\", \"userType\"];\n\n    dispatch(handleLoadingSpinnerOpenWithOptions(true, \"Loading...\", \"large\"));\n    instance.post(BASE_URL_SQL + 'Login', value)\n        .then(res => {\n            if (res.data.statusCode === 404) {\n                dispatch({\n                    type: LOGIN_PAGE_ERROR_HANDLER,\n                    payload: res.data.error,\n                });\n            }\n            dispatch(handleLoadingSpinnerClose());\n            keys_needed.map(item => {\n                resObj[reverseString(item)] = res.data[item];\n                return item;\n            });\n            resObj[reverseString(\"user_id\")] = res.data.userId;\n            ls.set('userId', res.data.userId);\n            resObj[reverseString(\"nameTitle\")] = res.data.userText ? res.data.userText : res.data.user_name.toUpperCase();\n            localStorage.setItem(reverseString(\"app_store\"), JSON.stringify(resObj));\n            dispatch({\n                type: LOGIN_SUBMIT_FORM_HANDLER,\n                payload: res.data\n            });\n            if(window.location.pathname === \"/login\") {\n                window.location.replace(\"/user\");\n            }else {\n                window.location.replace(window.location.pathname);\n            }\n        })\n        .catch(error => {\n            dispatch(handleLoadingSpinnerClose());\n        })\n}"]},"metadata":{},"sourceType":"module"}